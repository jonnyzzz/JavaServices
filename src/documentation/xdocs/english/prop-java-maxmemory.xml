<?xml version="1.0"?>

<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "../dtd/docbook/4.1.2/docbookx.dtd">

<!-- ********************************************************************
     $Id$
     ******************************************************************** -->

<chapter id="prop-java-maxmemory">
    <title>wrapper.java.maxmemory Property</title>
    <section>
        <title>Configuration Property Overview</title>
        <itemizedlist>
            <listitem>
                <ulink url="properties.html">Configuration Property Overview</ulink>
            </listitem>
            <listitem>
                <ulink url="props-jvm.html">JVM Configuration Properties</ulink>
            </listitem>
            <listitem>
                <ulink url="properties.html#name">Property List by Name</ulink>
            </listitem>
        </itemizedlist>
    </section>
    <section>
        <title>wrapper.java.maxmemory</title>
        <para>
            The maximum amount of memory in megabytes that the JVM will be
            allowed to use.  Defaults to 0, which will cause the JVM's default
            value to be used.  For most JVMs, the default value is 64MB.
        </para>
        <para>
            If a non-zero value is specified for this property then an appropriate
            <literal moreinfo="none">-Xmx</literal> parameter will be added to the
            Java command generated by the Wrapper.  If specified, the maximum memory
            must be greater than or equal to the value set for the
            <ulink url="prop-java-initmemory.html">wrapper.java.initmemory</ulink>
            property.
        </para>
        <para>
            If this property is set to 0 then it is also possible to specify
            the <literal moreinfo="none">-Xmx</literal> parameter manually using the
            <ulink url="prop-java-additional-n.html">wrapper.java.additional.&lt;n&gt;</ulink>
            property.
        </para>
        <informalexample>
            <simpara><emphasis>Example:</emphasis></simpara>
            <screen format="linespecific"><![CDATA[wrapper.java.maxmemory=64]]></screen>
        </informalexample>
        <note>
            <simpara>
                If an application is experiencing
                <literal moreinfo="none">java.lang.OutOfMemoryErrors</literal>
                then this often indicates that the maximum amount of memory
                available to the application needs to be increased.  Be
                aware that setting the maximum memory to a value which is
                greater than the amount of actual memory on the machine
                will result in memory swapping.  Memory swapping is a
                function of the operating system, and thus its performance
                is highly operating system specific.  However from
                experience this tends to result in a large decrease in
                application performance. In most cases, it is better to
                set the maximum memory to a value which fits within
                available memory and then rely on Java's garbage
                collection.
            </simpara>
        </note>
        <note>
            <simpara>
                Unless you really do know everything there is to know about memory
                and Garbage Collection in Java, I would recommend reading through
                the following document.  It describes in detail how the initial and
                maximum memory values affect Java performance and also goes into
                detail about what can be done to improve that performance for a
                given application.
            </simpara>
            <itemizedlist>
                <listitem>
                    <ulink url="http://java.sun.com/docs/hotspot/gc1.4.2/index.html">Tuning Garbage Collection with the 1.4.2 Java Virtual Machine.</ulink>
                </listitem>
                <listitem>
                    <ulink url="http://java.sun.com/docs/hotspot/gc/index.html">Tuning Garbage Collection with the 1.3.1 Java Virtual Machine.</ulink>
                </listitem>
            </itemizedlist>
        </note>
    </section>
</chapter>
